{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Victus/Desktop/Course_Project/app/welcome/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ChangeEvent, FormEvent, useEffect, useRef, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface Idea {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  status?: string;\r\n  createdAt?: string;\r\n  attachments?: {\r\n    id: string;\r\n    filename: string;\r\n    url: string;\r\n    mimetype: string;\r\n    size: number;\r\n  }[];\r\n  evaluations?: {\r\n    id: string;\r\n    comments: string;\r\n    decision: string;\r\n    createdAt?: string;\r\n  }[];\r\n}\r\n\r\nexport default function WelcomePage() {\r\n  const router = useRouter();\r\n  const [displayName, setDisplayName] = useState<string | null>(null);\r\n  const [accessToken, setAccessToken] = useState<string | null>(null);\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [otherCategory, setOtherCategory] = useState(\"\");\r\n  const [files, setFiles] = useState<File[]>([]);\r\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  const [ideas, setIdeas] = useState<Idea[]>([]);\r\n  const [loadingIdeas, setLoadingIdeas] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [savingDraft, setSavingDraft] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n\r\n  const allowedExtensions = [\"pdf\", \"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\"] as const;\r\n\r\n  const isAllowedFile = (file: File) => {\r\n    const parts = file.name.split(\".\");\r\n    if (parts.length < 2) return false;\r\n    const ext = parts[parts.length - 1].toLowerCase();\r\n    return allowedExtensions.includes(ext as (typeof allowedExtensions)[number]);\r\n  };\r\n\r\n  const readFileAsBase64 = (file: File) =>\r\n    new Promise<string>((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        const result = reader.result;\r\n        if (typeof result === \"string\") {\r\n          const base64 = result.includes(\",\") ? result.split(\",\")[1] : result;\r\n          resolve(base64);\r\n        } else {\r\n          reject(new Error(\"Failed to read file\"));\r\n        }\r\n      };\r\n      reader.onerror = () => reject(reader.error || new Error(\"Failed to read file\"));\r\n      reader.readAsDataURL(file);\r\n    });\r\n\r\n  const handleFilesChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const selected = e.target.files ? Array.from(e.target.files) : [];\r\n\r\n    if (selected.length === 0) {\r\n      setFiles([]);\r\n      return;\r\n    }\r\n\r\n    // Enforce single-file policy on the client side\r\n    let nextFiles = selected.slice(0, 1);\r\n    if (selected.length > 1) {\r\n      setError(\"At most one file can be uploaded.\");\r\n    } else {\r\n      setError(null);\r\n    }\r\n\r\n    const allowed = nextFiles.filter((file) => isAllowedFile(file));\r\n\r\n    if (allowed.length !== nextFiles.length) {\r\n      setError(\"Only document files (pdf, doc, docx, xls, xlsx, ppt, pptx) are allowed.\");\r\n    }\r\n\r\n    setFiles(allowed);\r\n\r\n    if (fileInputRef.current) {\r\n      const dt = new DataTransfer();\r\n      allowed.forEach((file) => dt.items.add(file));\r\n      fileInputRef.current.files = dt.files;\r\n    }\r\n  };\r\n\r\n  const renderStatus = (status?: string) => {\r\n    switch (status) {\r\n      case \"ACCEPTED\":\r\n        return \"Accepted\";\r\n      case \"REJECTED\":\r\n        return \"Rejected\";\r\n      case \"UNDER_REVIEW\":\r\n        return \"Under review\";\r\n      case \"SUBMITTED\":\r\n      default:\r\n        return \"Submitted (under review)\";\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = typeof window !== \"undefined\" ? window.localStorage.getItem(\"accessToken\") : null;\r\n\r\n    if (!token) {\r\n      router.replace(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Always derive the name from the current token (DB-backed),\r\n    // falling back to email if username is not present.\r\n    let nameToUse: string | null = null;\r\n    let emailFromToken: string | null = null;\r\n    try {\r\n      const parts = token.split(\".\");\r\n      if (parts.length === 3) {\r\n        const payload = JSON.parse(atob(parts[1].replace(/-/g, \"+\").replace(/_/g, \"/\")));\r\n        const payloadUsername = payload?.username as string | undefined;\r\n        const payloadEmail = payload?.email as string | undefined;\r\n        nameToUse = payloadUsername || payloadEmail || null;\r\n        emailFromToken = payloadEmail || null;\r\n\r\n        if (typeof window !== \"undefined\") {\r\n          try {\r\n            if (emailFromToken) {\r\n              window.localStorage.setItem(\"userEmail\", emailFromToken);\r\n            }\r\n            if (payloadUsername) {\r\n              window.localStorage.setItem(\"userName\", payloadUsername);\r\n            } else {\r\n              window.localStorage.removeItem(\"userName\");\r\n            }\r\n          } catch {\r\n            // ignore storage errors\r\n          }\r\n        }\r\n      }\r\n    } catch {\r\n      // ignore decode errors; nameToUse stays null\r\n    }\r\n\r\n    setDisplayName(nameToUse);\r\n    setAccessToken(token);\r\n    void loadIdeas(token);\r\n  }, [router]);\r\n\r\n  const loadIdeas = async (token: string) => {\r\n    setLoadingIdeas(true);\r\n    setError(null);\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/api/ideas\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      if (!res.ok) {\r\n        setError(`Failed to load ideas (${res.status}). Please try again later.`);\r\n        return;\r\n      }\r\n      const data = (await res.json()) as Idea[];\r\n      setIdeas(data || []);\r\n    } catch (err: any) {\r\n      setError(err?.message ?? \"Failed to load ideas\");\r\n    } finally {\r\n      setLoadingIdeas(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (!accessToken) {\r\n      router.replace(\"/login\");\r\n      return;\r\n    }\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    const finalCategory = category === \"__OTHER__\" ? otherCategory.trim() : category;\r\n\r\n    if (!title || !description || !finalCategory) {\r\n      setError(\"Title, description and category are required.\");\r\n      return;\r\n    }\r\n\r\n    // Validate attachments (if any) before sending to backend.\r\n    const invalidFiles = files.filter((f) => !isAllowedFile(f));\r\n    if (invalidFiles.length > 0) {\r\n      setError(\"Only document files (pdf, doc, docx, xls, xlsx, ppt, pptx) are allowed.\");\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/api/ideas\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${accessToken}`,\r\n        },\r\n        body: JSON.stringify({ title, description, category: finalCategory }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const body = await res.json().catch(() => null);\r\n        const msg = body?.error?.message || `Failed to create idea (${res.status})`;\r\n        throw new Error(msg);\r\n      }\r\n\r\n      const created = (await res.json()) as Idea;\r\n\r\n      if (files.length > 0) {\r\n        try {\r\n          const contents = await Promise.all(files.map((file) => readFileAsBase64(file)));\r\n          await Promise.all(\r\n            files.map((file, index) =>\r\n              fetch(\"http://localhost:3000/api/ideas/attach\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                  \"Content-Type\": \"application/json\",\r\n                  Authorization: `Bearer ${accessToken}`,\r\n                },\r\n                body: JSON.stringify({\r\n                  ideaId: created.id,\r\n                  filename: file.name,\r\n                  mimetype: file.type || \"application/octet-stream\",\r\n                  size: file.size,\r\n                  contentBase64: contents[index],\r\n                }),\r\n              })\r\n            )\r\n          );\r\n        } catch {\r\n          // Attachment errors should not block main idea submission.\r\n        }\r\n      }\r\n\r\n      // Optimistic update for idea itself; attachments will be refreshed from backend.\r\n      setIdeas((prev) => [created, ...prev]);\r\n\r\n      setTitle(\"\");\r\n      setDescription(\"\");\r\n      setCategory(\"\");\r\n      setOtherCategory(\"\");\r\n      setFiles([]);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = \"\";\r\n      }\r\n      setSuccess(\"Idea submitted successfully.\");\r\n      // Backend listelemesi hata verse bile form başarılı kabul edilsin.\r\n      await loadIdeas(accessToken);\r\n    } catch (err: any) {\r\n      setError(err?.message ?? \"Failed to create idea\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveDraft = async () => {\r\n    if (!accessToken) {\r\n      router.replace(\"/login\");\r\n      return;\r\n    }\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    const finalCategory = category === \"__OTHER__\" ? otherCategory.trim() : category || \"other\";\r\n\r\n    if (!title || !description) {\r\n      setError(\"Title and description are required to save a draft.\");\r\n      return;\r\n    }\r\n\r\n    setSavingDraft(true);\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/api/drafts\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${accessToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n          title,\r\n          description,\r\n          category: finalCategory,\r\n          dynamicFieldValues: {},\r\n        }),\r\n      });\r\n      if (!res.ok) {\r\n        const body = await res.json().catch(() => null);\r\n        const msg = body?.error?.message || `Failed to save draft (${res.status})`;\r\n        throw new Error(msg);\r\n      }\r\n      const draft = await res.json();\r\n\r\n      if (files.length > 0) {\r\n        const contents = await Promise.all(files.map((file) => readFileAsBase64(file)));\r\n        await Promise.all(\r\n          files.map((file, index) =>\r\n            fetch(\"http://localhost:3000/api/drafts/attach\", {\r\n              method: \"POST\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${accessToken}`,\r\n              },\r\n              body: JSON.stringify({\r\n                draftId: draft.id,\r\n                filename: file.name,\r\n                mimetype: file.type || \"application/octet-stream\",\r\n                size: file.size,\r\n                contentBase64: contents[index],\r\n              }),\r\n            })\r\n          )\r\n        );\r\n      }\r\n\r\n      setSuccess(\"Draft saved.\");\r\n    } catch (err: any) {\r\n      setError(err?.message ?? \"Failed to save draft\");\r\n    } finally {\r\n      setSavingDraft(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"welcome-page\">\r\n      <section className=\"welcome-header\">\r\n        <h1>Welcome{displayName ? `, ${displayName}` : \"\"}</h1>\r\n        <p>From here you can submit a new idea, save it as a draft, and see your own ideas.</p>\r\n        <div style={{ marginTop: \"0.75rem\", display: \"flex\", gap: \"0.5rem\", flexWrap: \"wrap\" }}>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn secondary\"\r\n            onClick={() => router.push(\"/ideas/drafts\")}\r\n          >\r\n            My drafts\r\n          </button>\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"card\" aria-labelledby=\"idea-form-heading\">\r\n        <h2 id=\"idea-form-heading\">Submit new idea</h2>\r\n        <form onSubmit={handleSubmit} className=\"idea-form\">\r\n          <div className=\"idea-form-field\">\r\n            <label htmlFor=\"title\">Title</label>\r\n            <input\r\n              id=\"title\"\r\n              name=\"title\"\r\n              type=\"text\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"idea-form-field\">\r\n            <label htmlFor=\"description\">Description</label>\r\n            <textarea\r\n              id=\"description\"\r\n              name=\"description\"\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              required\r\n              rows={4}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"idea-form-field\">\r\n            <label htmlFor=\"category\">Category</label>\r\n            <select\r\n              id=\"category\"\r\n              name=\"category\"\r\n              value={category}\r\n              onChange={(e) => setCategory(e.target.value)}\r\n              required\r\n            >\r\n              <option value=\"\">Select a category</option>\r\n              <option value=\"Process improvement\">Process improvement</option>\r\n              <option value=\"New product\">New product</option>\r\n              <option value=\"Customer experience\">Customer experience</option>\r\n              <option value=\"Internal tools\">Internal tools</option>\r\n              <option value=\"Cost optimization\">Cost optimization</option>\r\n              <option value=\"__OTHER__\">Other</option>\r\n            </select>\r\n            {category === \"__OTHER__\" && (\r\n              <input\r\n                id=\"otherCategory\"\r\n                name=\"otherCategory\"\r\n                type=\"text\"\r\n                placeholder=\"Enter your category\"\r\n                value={otherCategory}\r\n                onChange={(e) => setOtherCategory(e.target.value)}\r\n                required\r\n              />\r\n            )}\r\n            <small>You can choose a category from the list or select Other and type your own.</small>\r\n          </div>\r\n\r\n          <div className=\"idea-form-field\">\r\n            <label htmlFor=\"attachment\">Attachment (you can select one file)</label>\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"0.5rem\", marginBottom: \"0.25rem\" }}>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn secondary\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n              >\r\n                Choose files\r\n              </button>\r\n              <span>{files.length > 0 ? `${files.length} file(s) selected` : \"No files selected\"}</span>\r\n            </div>\r\n            <input\r\n              id=\"attachment\"\r\n              name=\"attachment\"\r\n              type=\"file\"\r\n              ref={fileInputRef}\r\n              onChange={handleFilesChange}\r\n              style={{ display: \"none\" }}\r\n            />\r\n            <small>\r\n              Allowed file types: pdf, doc, docx, xls, xlsx, ppt, pptx.\r\n            </small>\r\n            {files.length > 0 && (\r\n              <ul style={{ marginTop: \"0.5rem\" }}>\r\n                {files.map((file, index) => (\r\n                  <li key={`${file.name}-${index}`}>\r\n                    {file.name}{\" \"}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        setFiles((prev) => {\r\n                          const next = [...prev];\r\n                          next.splice(index, 1);\r\n\r\n                          // Dosya input'unu da güncel listeyle senkronize et\r\n                          if (fileInputRef.current) {\r\n                            const dt = new DataTransfer();\r\n                            next.forEach((f) => dt.items.add(f));\r\n                            fileInputRef.current.files = dt.files;\r\n                          }\r\n\r\n                          return next;\r\n                        });\r\n                      }}\r\n                      style={{ marginLeft: \"0.5rem\" }}\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"idea-form-actions\" style={{ display: \"flex\", gap: \"0.5rem\" }}>\r\n            <button\r\n              type=\"button\"\r\n              disabled={savingDraft}\r\n              className=\"btn secondary\"\r\n              onClick={() => void handleSaveDraft()}\r\n            >\r\n              {savingDraft ? \"Saving draft...\" : \"Save as draft\"}\r\n            </button>\r\n            <button type=\"submit\" disabled={submitting} className=\"btn\">\r\n              {submitting ? \"Submitting...\" : \"Submit idea\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n        {error && (\r\n          <div role=\"alert\" style={{ color: \"red\", marginTop: \"0.5rem\" }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n        {success && (\r\n          <div role=\"status\" style={{ color: \"green\", marginTop: \"0.5rem\" }}>\r\n            {success}\r\n          </div>\r\n        )}\r\n      </section>\r\n\r\n      <section className=\"card\" aria-labelledby=\"idea-list-heading\">\r\n        <h2 id=\"idea-list-heading\">Your ideas</h2>\r\n        {loadingIdeas ? (\r\n          <p>Loading...</p>\r\n        ) : ideas.length === 0 ? (\r\n          <p>You do not have any ideas yet.</p>\r\n        ) : (\r\n          <div className=\"idea-table\">\r\n            <div className=\"idea-table-header\">\r\n              <span>Title & description</span>\r\n              <span>Category</span>\r\n              <span>Status</span>\r\n              <span>Admin comment</span>\r\n              <span>Attachments</span>\r\n            </div>\r\n            <ul className=\"idea-list\">\r\n              {ideas.map((idea) => (\r\n                <li key={idea.id} className=\"idea-item\">\r\n                  <div>\r\n                    <h3>{idea.title}</h3>\r\n                    <p>{idea.description}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p>{idea.category}</p>\r\n                  </div>\r\n                  <div>\r\n                    {idea.status && <span>{renderStatus(idea.status)}</span>}\r\n                  </div>\r\n                  <div>\r\n                    {idea.evaluations && idea.evaluations.length > 0 ? (\r\n                      <p style={{ margin: 0, fontSize: \"0.85rem\", color: \"#6b7280\" }}>\r\n                        Admin comment: {idea.evaluations[idea.evaluations.length - 1].comments}\r\n                      </p>\r\n                    ) : (\r\n                      <span>-</span>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    {idea.attachments && idea.attachments.length > 0 ? (\r\n                      idea.attachments.map((att) => (\r\n                        <div key={att.id}>\r\n                          <a href={att.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            {att.filename}\r\n                          </a>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <span>-</span>\r\n                    )}\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}