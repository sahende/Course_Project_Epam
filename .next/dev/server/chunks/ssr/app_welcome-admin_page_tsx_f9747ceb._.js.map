{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Victus/Desktop/Course_Project/app/welcome-admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface ReviewDraft {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  dynamicFieldValues?: {\r\n    ideaId?: string;\r\n    decision?: string;\r\n    ideaTitle?: string;\r\n  };\r\n  updatedAt?: string;\r\n  // enriched after load\r\n  _idea?: Idea;\r\n}\r\n\r\ninterface Idea {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  status?: string;\r\n  attachments?: {\r\n    id: string;\r\n    filename: string;\r\n    url: string;\r\n    mimetype: string;\r\n    size: number;\r\n  }[];\r\n  evaluations?: {\r\n    id: string;\r\n    comments: string;\r\n    decision: string;\r\n    createdAt?: string;\r\n  }[];\r\n}\r\n\r\nexport default function WelcomeAdminPage() {\r\n  const router = useRouter();\r\n  const [displayName, setDisplayName] = useState<string | null>(null);\r\n  const [accessToken, setAccessToken] = useState<string | null>(null);\r\n\r\n  const [ideas, setIdeas] = useState<Idea[]>([]);\r\n  const [allIdeas, setAllIdeas] = useState<Idea[]>([]);\r\n  const [loadingIdeas, setLoadingIdeas] = useState(false);\r\n  const [evaluationComment, setEvaluationComment] = useState<Record<string, string>>({});\r\n  const [evaluationDecision, setEvaluationDecision] = useState<Record<string, \"ACCEPTED\" | \"REJECTED\">>({});\r\n  const [evaluatingId, setEvaluatingId] = useState<string | null>(null);\r\n  const [savingDraftId, setSavingDraftId] = useState<string | null>(null);\r\n  const [reviewDrafts, setReviewDrafts] = useState<ReviewDraft[]>([]);\r\n  const [loadingDrafts, setLoadingDrafts] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    const token = window.localStorage.getItem(\"accessToken\");\r\n\r\n    if (!token) {\r\n      router.replace(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Role guard: evaluator-only dashboard\r\n    try {\r\n      const parts = token.split(\".\");\r\n      if (parts.length === 3) {\r\n        const payload = JSON.parse(atob(parts[1].replace(/-/g, \"+\").replace(/_/g, \"/\")));\r\n        if (payload?.role !== \"EVALUATOR\") {\r\n          router.replace(\"/welcome\");\r\n          return;\r\n        }\r\n      }\r\n    } catch {\r\n      router.replace(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Derive admin/evaluator display name from current token (username or email)\r\n    try {\r\n      const parts = token.split(\".\");\r\n      if (parts.length === 3) {\r\n        const payload = JSON.parse(atob(parts[1].replace(/-/g, \"+\").replace(/_/g, \"/\")));\r\n        const payloadUsername = payload?.username as string | undefined;\r\n        const payloadEmail = payload?.email as string | undefined;\r\n        const nameToUse = payloadUsername || payloadEmail || null;\r\n        setDisplayName(nameToUse);\r\n\r\n        if (typeof window !== \"undefined\") {\r\n          try {\r\n            if (payloadEmail) {\r\n              window.localStorage.setItem(\"userEmail\", payloadEmail);\r\n            }\r\n            if (payloadUsername) {\r\n              window.localStorage.setItem(\"userName\", payloadUsername);\r\n            } else {\r\n              window.localStorage.removeItem(\"userName\");\r\n            }\r\n          } catch {\r\n            // ignore storage errors\r\n          }\r\n        }\r\n      }\r\n    } catch {\r\n      // ignore decode errors\r\n    }\r\n\r\n    setAccessToken(token);\r\n    void (async () => {\r\n      const [fetchedIdeas, fetchedDrafts] = await Promise.all([\r\n        fetchIdeas(token),\r\n        fetchReviewDrafts(token),\r\n      ]);\r\n      applyLists(fetchedIdeas, fetchedDrafts);\r\n    })();\r\n  }, [router]);\r\n\r\n  // Fetch helpers that return data without setting state\r\n  const fetchIdeas = async (token: string): Promise<Idea[]> => {\r\n    setLoadingIdeas(true);\r\n    setError(null);\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/api/ideas\", {\r\n        method: \"GET\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (!res.ok) {\r\n        setError(`Failed to load ideas (${res.status}). Please try again later.`);\r\n        return [];\r\n      }\r\n      return ((await res.json()) as Idea[]) || [];\r\n    } catch (err: any) {\r\n      setError(err?.message ?? \"Failed to load ideas\");\r\n      return [];\r\n    } finally {\r\n      setLoadingIdeas(false);\r\n    }\r\n  };\r\n\r\n  const fetchReviewDrafts = async (token: string): Promise<ReviewDraft[]> => {\r\n    setLoadingDrafts(true);\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/api/drafts\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (!res.ok) return [];\r\n      const data = (await res.json()) as ReviewDraft[];\r\n      return (data || []).filter((d) => d.category === \"review-draft\");\r\n    } catch {\r\n      return [];\r\n    } finally {\r\n      setLoadingDrafts(false);\r\n    }\r\n  };\r\n\r\n  // Apply both lists together: enrich drafts with idea data, filter queue\r\n  const applyLists = (fetchedIdeas: Idea[], fetchedDrafts: ReviewDraft[]) => {\r\n    setAllIdeas(fetchedIdeas);\r\n    const draftedIdeaIds = new Set(fetchedDrafts.map((d) => d.dynamicFieldValues?.ideaId).filter(Boolean));\r\n    setIdeas(fetchedIdeas.filter((i) => !draftedIdeaIds.has(i.id)));\r\n    const enriched = fetchedDrafts.map((d) => ({\r\n      ...d,\r\n      _idea: fetchedIdeas.find((i) => i.id === d.dynamicFieldValues?.ideaId),\r\n    }));\r\n    setReviewDrafts(enriched);\r\n  };\r\n\r\n  const reloadAll = async () => {\r\n    if (!accessToken) return;\r\n    const [fetchedIdeas, fetchedDrafts] = await Promise.all([\r\n      fetchIdeas(accessToken),\r\n      fetchReviewDrafts(accessToken),\r\n    ]);\r\n    applyLists(fetchedIdeas, fetchedDrafts);\r\n  };\r\n\r\n  const handleEvaluate = async (ideaId: string) => {\r\n    if (!accessToken) { router.replace(\"/login\"); return; }\r\n    const comment = evaluationComment[ideaId]?.trim();\r\n    const decision = evaluationDecision[ideaId];\r\n    if (!comment) {\r\n      setError(\"Please enter a comment before submitting a decision.\");\r\n      return;\r\n    }\r\n    if (!decision) {\r\n      setError(\"Please select Accept or Reject before submitting.\");\r\n      return;\r\n    }\r\n    setError(null);\r\n    setSuccess(null);\r\n    setEvaluatingId(ideaId);\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/api/evaluations\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${accessToken}` },\r\n        body: JSON.stringify({ ideaId, decision, comments: comment }),\r\n      });\r\n      if (!res.ok) {\r\n        const body = await res.json().catch(() => null);\r\n        throw new Error(body?.error?.message || `Failed to submit evaluation (${res.status})`);\r\n      }\r\n      const result = (await res.json().catch(() => null)) as\r\n        | { ideaId: string; evaluation: { id: string; comments: string; decision: string; createdAt?: string } }\r\n        | null;\r\n      setIdeas((prev) =>\r\n        prev.map((idea) => {\r\n          if (idea.id !== ideaId) return idea;\r\n          const existingEvaluations = idea.evaluations ?? [];\r\n          const nextEvaluations =\r\n            result && result.evaluation ? [...existingEvaluations, result.evaluation] : existingEvaluations;\r\n          return { ...idea, status: decision, evaluations: nextEvaluations };\r\n        })\r\n      );\r\n      setEvaluationComment((prev) => ({ ...prev, [ideaId]: \"\" }));\r\n      setEvaluationDecision((prev) => { const next = { ...prev }; delete next[ideaId]; return next; });\r\n      setSuccess(`Decision saved as ${decision.toLowerCase()}.`);\r\n    } catch (err: any) {\r\n      setError(err?.message ?? \"Failed to submit evaluation\");\r\n    } finally {\r\n      setEvaluatingId(null);\r\n    }\r\n  };\r\n\r\n  const handleSaveReviewDraft = async (ideaId: string) => {\r\n    if (!accessToken) { router.replace(\"/login\"); return; }\r\n    const comment = evaluationComment[ideaId]?.trim();\r\n    const decision = evaluationDecision[ideaId];\r\n    if (!comment) {\r\n      setError(\"Please enter a comment before saving a draft.\");\r\n      return;\r\n    }\r\n    setError(null);\r\n    setSuccess(null);\r\n    setSavingDraftId(ideaId);\r\n    try {\r\n      // Check if a review draft for this idea already exists\r\n      const existing = reviewDrafts.find(\r\n        (d) => d.dynamicFieldValues?.ideaId === ideaId\r\n      );\r\n      const idea = ideas.find((i) => i.id === ideaId);\r\n\r\n      if (existing) {\r\n        // Update the existing draft\r\n        const res = await fetch(`http://localhost:3000/api/drafts/${encodeURIComponent(existing.id)}`, {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${accessToken}` },\r\n          body: JSON.stringify({\r\n            title: existing.title,\r\n            description: comment,\r\n            category: \"review-draft\",\r\n            dynamicFieldValues: { ideaId, decision: decision ?? existing.dynamicFieldValues?.decision ?? \"\", ideaTitle: idea?.title ?? \"\" },\r\n          }),\r\n        });\r\n        if (!res.ok) {\r\n          const body = await res.json().catch(() => null);\r\n          throw new Error(body?.error?.message || `Failed to update review draft (${res.status})`);\r\n        }\r\n      } else {\r\n        // Create a new draft\r\n        const res = await fetch(\"http://localhost:3000/api/drafts\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${accessToken}` },\r\n          body: JSON.stringify({\r\n            title: `review-draft:${ideaId}`,\r\n            description: comment,\r\n            category: \"review-draft\",\r\n            dynamicFieldValues: { ideaId, decision: decision ?? \"\", ideaTitle: idea?.title ?? \"\" },\r\n          }),\r\n        });\r\n        if (!res.ok) {\r\n          const body = await res.json().catch(() => null);\r\n          throw new Error(body?.error?.message || `Failed to save review draft (${res.status})`);\r\n        }\r\n      }\r\n\r\n      // Reload everything — idea disappears from queue, appears in drafts\r\n      await reloadAll();\r\n      setSuccess(\"Review draft saved.\");\r\n    } catch (err: any) {\r\n      setError(err?.message ?? \"Failed to save review draft\");\r\n    } finally {\r\n      setSavingDraftId(null);\r\n    }\r\n  };\r\n\r\n  const renderStatus = (status?: string) => {\r\n    switch (status) {\r\n      case \"ACCEPTED\":\r\n        return \"Accepted\";\r\n      case \"REJECTED\":\r\n        return \"Rejected\";\r\n      case \"UNDER_REVIEW\":\r\n        return \"Under review\";\r\n      case \"SUBMITTED\":\r\n      default:\r\n        return \"Submitted\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"welcome-page\">\r\n      <section className=\"welcome-header\">\r\n        <h1>Admin / Evaluator Dashboard{displayName ? `, ${displayName}` : \"\"}</h1>\r\n        <p>You are signed in with evaluator privileges and can review ideas.</p>\r\n      </section>\r\n\r\n      <section className=\"card\" aria-labelledby=\"idea-review-heading\">\r\n        <h2 id=\"idea-review-heading\">Idea review queue</h2>\r\n        {error && (\r\n          <div role=\"alert\" style={{ color: \"red\", marginBottom: \"0.5rem\" }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n        {success && (\r\n          <div role=\"status\" style={{ color: \"green\", marginBottom: \"0.5rem\" }}>\r\n            {success}\r\n          </div>\r\n        )}\r\n        {loadingIdeas ? (\r\n          <p>Loading ideas...</p>\r\n        ) : ideas.length === 0 ? (\r\n          <p>There are no ideas to review yet.</p>\r\n        ) : (\r\n          <div className=\"idea-table\">\r\n            <div className=\"idea-table-header idea-table-header--admin\">\r\n              <span>Title & description</span>\r\n              <span>Category</span>\r\n              <span>Status</span>\r\n              <span>Attachments</span>\r\n              <span>Review & comment</span>\r\n            </div>\r\n            <ul className=\"idea-list\">\r\n              {ideas.map((idea) => {\r\n                const latestComment =\r\n                  idea.evaluations && idea.evaluations.length > 0\r\n                    ? idea.evaluations[idea.evaluations.length - 1].comments\r\n                    : null;\r\n\r\n                const isFinal = idea.status === \"ACCEPTED\" || idea.status === \"REJECTED\";\r\n\r\n                return (\r\n                  <li key={idea.id} className=\"idea-item idea-item--admin\">\r\n                    <div>\r\n                      <h3>{idea.title}</h3>\r\n                      <p>{idea.description}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p>{idea.category}</p>\r\n                    </div>\r\n                    <div>\r\n                      <span>{renderStatus(idea.status)}</span>\r\n                    </div>\r\n                    <div>\r\n                      {idea.attachments && idea.attachments.length > 0 ? (\r\n                        idea.attachments.map((att) => (\r\n                          <div key={att.id}>\r\n                            <a href={att.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                              {att.filename}\r\n                            </a>\r\n                          </div>\r\n                        ))\r\n                      ) : (\r\n                        <span>-</span>\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      {isFinal ? (\r\n                        <>\r\n                          <p style={{ margin: 0 }}>Decision recorded.</p>\r\n                          {latestComment && (\r\n                            <p\r\n                              style={{\r\n                                margin: \"0.25rem 0 0 0\",\r\n                                fontSize: \"0.85rem\",\r\n                                color: \"#6b7280\",\r\n                              }}\r\n                            >\r\n                              Admin comment: {latestComment}\r\n                            </p>\r\n                          )}\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <div className=\"idea-form-field\" style={{ marginTop: \"0.15rem\" }}>\r\n                            <label htmlFor={`comment-${idea.id}`}>Evaluation comment</label>\r\n                            <textarea\r\n                              id={`comment-${idea.id}`}\r\n                              value={evaluationComment[idea.id] ?? \"\"}\r\n                              onChange={(e) =>\r\n                                setEvaluationComment((prev) => ({\r\n                                  ...prev,\r\n                                  [idea.id]: e.target.value,\r\n                                }))\r\n                              }\r\n                              rows={3}\r\n                            />\r\n                          </div>\r\n                          <div style={{ display: \"flex\", gap: \"1rem\", marginTop: \"0.4rem\" }}>\r\n                            <label style={{ display: \"flex\", alignItems: \"center\", gap: \"0.3rem\", cursor: \"pointer\" }}>\r\n                              <input\r\n                                type=\"radio\"\r\n                                name={`decision-${idea.id}`}\r\n                                value=\"ACCEPTED\"\r\n                                checked={evaluationDecision[idea.id] === \"ACCEPTED\"}\r\n                                onChange={() =>\r\n                                  setEvaluationDecision((prev) => ({ ...prev, [idea.id]: \"ACCEPTED\" }))\r\n                                }\r\n                              />\r\n                              Accept\r\n                            </label>\r\n                            <label style={{ display: \"flex\", alignItems: \"center\", gap: \"0.3rem\", cursor: \"pointer\" }}>\r\n                              <input\r\n                                type=\"radio\"\r\n                                name={`decision-${idea.id}`}\r\n                                value=\"REJECTED\"\r\n                                checked={evaluationDecision[idea.id] === \"REJECTED\"}\r\n                                onChange={() =>\r\n                                  setEvaluationDecision((prev) => ({ ...prev, [idea.id]: \"REJECTED\" }))\r\n                                }\r\n                              />\r\n                              Reject\r\n                            </label>\r\n                          </div>\r\n                          <div className=\"idea-form-actions\" style={{ marginTop: \"0.4rem\" }}>\r\n                            <button\r\n                              type=\"button\"\r\n                              className=\"btn secondary\"\r\n                              disabled={savingDraftId === idea.id}\r\n                              onClick={() => void handleSaveReviewDraft(idea.id)}\r\n                            >\r\n                              {savingDraftId === idea.id ? \"Saving draft...\" : \"Save as draft\"}\r\n                            </button>\r\n                            <button\r\n                              type=\"button\"\r\n                              className=\"btn\"\r\n                              disabled={evaluatingId === idea.id}\r\n                              onClick={() => void handleEvaluate(idea.id)}\r\n                            >\r\n                              {evaluatingId === idea.id ? \"Saving...\" : \"Submit\"}\r\n                            </button>\r\n                          </div>\r\n                          {latestComment && (\r\n                            <p\r\n                              style={{\r\n                                margin: \"0.35rem 0 0 0\",\r\n                                fontSize: \"0.85rem\",\r\n                                color: \"#6b7280\",\r\n                              }}\r\n                            >\r\n                              Admin comment: {latestComment}\r\n                            </p>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </section>\r\n\r\n      <section className=\"card\" aria-labelledby=\"review-drafts-heading\" style={{ marginTop: \"1.5rem\" }}>\r\n        <h2 id=\"review-drafts-heading\">My review drafts</h2>\r\n        {loadingDrafts ? (\r\n          <p>Loading review drafts…</p>\r\n        ) : reviewDrafts.length === 0 ? (\r\n          <p>No saved review drafts.</p>\r\n        ) : (\r\n          <div className=\"idea-table\">\r\n            <div className=\"idea-table-header idea-table-header--admin\">\r\n              <span>Title &amp; description</span>\r\n              <span>Category</span>\r\n              <span>Status</span>\r\n              <span>Attachments</span>\r\n              <span>Draft comment &amp; decision</span>\r\n            </div>\r\n            <ul className=\"idea-list\">\r\n              {reviewDrafts.map((rd) => {\r\n                const idea = rd._idea;\r\n                const decisionLabel =\r\n                  rd.dynamicFieldValues?.decision === \"ACCEPTED\"\r\n                    ? \"Accept\"\r\n                    : rd.dynamicFieldValues?.decision === \"REJECTED\"\r\n                    ? \"Reject\"\r\n                    : \"No decision yet\";\r\n                return (\r\n                  <li key={rd.id} className=\"idea-item idea-item--admin\">\r\n                    <div>\r\n                      <h3>{idea?.title ?? rd.dynamicFieldValues?.ideaTitle ?? \"Unknown idea\"}</h3>\r\n                      <p>{idea?.description ?? \"—\"}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p>{idea?.category ?? \"—\"}</p>\r\n                    </div>\r\n                    <div>\r\n                      <span>{renderStatus(idea?.status)}</span>\r\n                    </div>\r\n                    <div>\r\n                      {idea?.attachments && idea.attachments.length > 0 ? (\r\n                        idea.attachments.map((att) => (\r\n                          <div key={att.id}>\r\n                            <a href={att.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                              {att.filename}\r\n                            </a>\r\n                          </div>\r\n                        ))\r\n                      ) : (\r\n                        <span>-</span>\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      <p style={{ margin: 0, fontSize: \"0.85rem\", color: \"#374151\" }}>\r\n                        {rd.description?.slice(0, 150)}{rd.description && rd.description.length > 150 ? \"…\" : \"\"}\r\n                      </p>\r\n                      <small style={{ color: \"#6b7280\" }}>Decision: {decisionLabel}</small>\r\n                      <div style={{ marginTop: \"0.5rem\" }}>\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn secondary\"\r\n                          onClick={() => router.push(`/welcome-admin/draft/${encodeURIComponent(rd.id)}`)}\r\n                        >\r\n                          Edit draft\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}